# 数据库配置示例
# 复制此文件内容到 src/config.yaml 中的 database 部分

# ============================================================
# 选项1: 启用数据库模式（MySQL存储 + 文件备份）
# ============================================================
database:
  enabled: true
  connection_string: "mysql+pymysql://root:your_password@localhost:3306/hospital_db?charset=utf8mb4"
  backup_to_file: true  # 同时备份到文件（推荐）
  echo: false           # 调试时设为 true 可查看SQL语句

# ============================================================
# 选项2: 仅使用数据库（不备份文件）
# ============================================================
# database:
#   enabled: true
#   connection_string: "mysql+pymysql://root:your_password@localhost:3306/hospital_db?charset=utf8mb4"
#   backup_to_file: false
#   echo: false

# ============================================================
# 选项3: 禁用数据库（使用文件模式）
# ============================================================
# database:
#   enabled: false
#   connection_string: "mysql+pymysql://root:password@localhost:3306/hospital_db?charset=utf8mb4"
#   backup_to_file: true
#   echo: false

# ============================================================
# 连接字符串格式说明
# ============================================================
# 格式: mysql+pymysql://用户名:密码@主机:端口/数据库名?charset=utf8mb4
#
# 示例:
#   本地开发:     mysql+pymysql://root:123456@localhost:3306/hospital_db?charset=utf8mb4
#   远程服务器:   mysql+pymysql://user:pass@192.168.1.100:3306/hospital_db?charset=utf8mb4
#   Docker容器:   mysql+pymysql://root:root@mysql-container:3306/hospital_db?charset=utf8mb4

# ============================================================
# 使用环境变量（推荐用于生产环境）
# ============================================================
# 1. 设置环境变量:
#    Windows: set DATABASE_URL=mysql+pymysql://root:password@localhost:3306/hospital_db
#    Linux:   export DATABASE_URL=mysql+pymysql://root:password@localhost:3306/hospital_db
#
# 2. 在配置中引用:
#    connection_string: "${DATABASE_URL}"

# ============================================================
# 数据库准备（首次使用前执行）
# ============================================================
# 1. 启动MySQL服务
# 2. 创建数据库:
#    CREATE DATABASE hospital_db DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
# 3. 创建用户（可选）:
#    CREATE USER 'hospital_user'@'localhost' IDENTIFIED BY 'your_password';
#    GRANT ALL PRIVILEGES ON hospital_db.* TO 'hospital_user'@'localhost';
#    FLUSH PRIVILEGES;
# 4. 运行测试:
#    python test_database.py
